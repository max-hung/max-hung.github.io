import{_ as ne}from"./t5m8x_TL.js";import{_ as H}from"./82EDPpRA.js";import{_ as ie}from"./nVl-3sKa.js";import{_ as R,c as a,o as l,D as F,e as z,r as h,h as te,R as ue,a as u,f as m,t as D,b as w,n as $,u as r,F as M,g as L,j as N,C as E,l as de,i as K,E as X,G as Y,w as ce,A as pe,H as Z,I as ee}from"./BWmc6sBk.js";const me={},fe={class:"relative outline outline-1 outline-gray-200 rounded-xl bg-white"};function ve(n,O){return l(),a("div",fe,[F(n.$slots,"default")])}const ge=R(me,[["render",ve]]),be=["for"],ye={class:"pl-2"},he={key:0,class:"absolute left-0 right-0 z-50 w-full bg-white border border-gray-300 rounded-default mt-1"},ke=["onClick"],_e=z({__name:"BaseOptions",props:{modelValue:{},options:{},label:{}},emits:["update:modelValue"],setup(n,{emit:O}){const d=n,g=O,p=h(!1),o=h(null),k=()=>{p.value=!p.value},P=i=>{g("update:modelValue",i),p.value=!1},V=i=>{o.value&&!o.value.contains(i.target)&&(p.value=!1)};return te(()=>{document.addEventListener("click",V),d.modelValue||d.options&&d.options.length>0&&g("update:modelValue",{title:d.options[0].title,value:d.options[0].value})}),ue(()=>{document.removeEventListener("click",V)}),(i,c)=>{var B;const C=H;return l(),a("div",{ref_key:"dropdown",ref:o,class:"relative inline-block w-auto text-sm",onClick:k},[u("label",{class:"font-normal text-base",for:d.label},D(d.label),9,be),u("div",{class:$(["flex items-center justify-between px-3 py-2 border border-gray-300 hover:border-neutral-500 rounded-default cursor-pointer",{"mt-1":d.label}])},[u("div",null,D((B=i.modelValue)==null?void 0:B.title),1),u("div",ye,[w(C,{class:$(["icon-arrows-directions-up",{rotate:r(p)}])},null,8,["class"])])],2),r(p)?(l(),a("div",he,[(l(!0),a(M,null,L(i.options,v=>{var _;return l(),a("div",{key:v.value,class:$(["flex px-3 py-2 justify-start items-start cursor-pointer hover:bg-red-50 rounded-default",{"text-red-700":((_=i.modelValue)==null?void 0:_.value)===v.value}]),onClick:T=>P(v)},D(v.title),11,ke)}),128))])):m("",!0)],512)}}}),Pe={class:"flex justify-center gap-2 items-center"},xe=["disabled"],we=["onClick"],$e=["disabled"],Ve={class:"text-gray-500 lg:flex-none text-center lg:my-0 mt-4"},Ce={key:0,class:"w-full md:w-auto mt-4 md:mt-0 flex justify-center items-center"},Se=z({__name:"DatatablePagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},itemsPerPage:{type:Number,default:10},options:{type:Array,default:()=>[{title:"10",value:10},{title:"20",value:20},{title:"30",value:30}]},hasItemsPer:{type:Boolean,default:!0},totalItems:{type:Number,required:!0},maxVisiblePages:{type:Number,default:5}},emits:["update:currentPage","update:itemsPerPage"],setup(n,{emit:O}){const d=n,g=O,p=h(d.options[0]),o=N(()=>{const i=Math.max(1,d.currentPage-Math.floor(d.maxVisiblePages/2)),c=Math.min(d.totalPages,i+d.maxVisiblePages-1);return Array.from({length:c-i+1},(C,B)=>i+B)}),k=i=>{g("update:currentPage",i)},P=()=>{d.currentPage>1&&g("update:currentPage",d.currentPage-1)},V=()=>{d.currentPage<d.totalPages&&g("update:currentPage",d.currentPage+1)};return E(p,i=>{g("update:itemsPerPage",i.value),g("update:currentPage",1)}),(i,c)=>{const C=H,B=_e;return l(),a("div",{class:$(["lg:flex lg:items-center mt-4",[n.hasItemsPer?"lg:justify-between":"lg:justify-center"]])},[u("div",Pe,[n.currentPage>Math.floor(n.maxVisiblePages/2)+2?(l(),a("button",{key:0,onClick:c[0]||(c[0]=v=>k(1))},[w(C,{class:"icon-double-arrows-left"})])):m("",!0),u("button",{disabled:n.currentPage===1,onClick:P},[w(C,{class:"icon-arrows-directions-left"})],8,xe),(l(!0),a(M,null,L(r(o),v=>(l(),a("button",{key:v,class:$(["p-2 w-9 rounded-default text-primary1 ",{"hover:bg-white":n.currentPage!==v},{"bg-primary1 text-white":n.currentPage===v}]),onClick:_=>k(v)},D(v),11,we))),128)),u("button",{disabled:n.currentPage===n.totalPages,onClick:V},[w(C,{class:"icon-arrows-directions-right"})],8,$e),n.totalPages>Math.floor(n.maxVisiblePages/2)+2&&n.currentPage<n.totalPages-Math.floor(n.maxVisiblePages/2)-1?(l(),a("button",{key:1,onClick:c[1]||(c[1]=v=>k(n.totalPages))},[w(C,{class:"icon-double-arrows-right"})])):m("",!0)]),u("div",Ve," Showing 1 to "+D(r(p).value)+" of "+D(n.totalItems)+" entries ",1),n.hasItemsPer?(l(),a("div",Ce,[c[3]||(c[3]=u("div",{class:"px-4"},"Items per page:",-1)),w(B,{modelValue:r(p),"onUpdate:modelValue":c[2]||(c[2]=v=>de(p)?p.value=v:null),options:n.options},null,8,["modelValue","options"])])):m("",!0)],2)}}}),Be=R(Se,[["__scopeId","data-v-a82ea9b3"]]),Ie={key:0,class:"px-5 py-3"},De={key:0,class:"py-[10px]"},Fe={class:"w-full text-sm text-left font-normal table-auto"},Me={class:"text-left bg-slate-100 text-xs font-medium text-gray-800 sticky top-0 z-20"},Oe={class:"border-l-2 border-l-slate-100"},je={key:0,scope:"col",class:"p-[10px] bg-slate-100"},Ne=["onClick"],Le=["innerHTML"],Te={key:0,class:"flex justify-center items-center"},Ae={key:1,class:"p-[10px] bg-slate-100 text-gray-800"},Ue={key:0},Ke={key:0,class:"p-0"},Ee={class:"bg-white p-[10px] text-black"},He={key:0},Re=["colspan"],ze={class:"flex justify-center p-4"},qe={key:1},Qe=["onMouseover"],Ge={key:0},We=["rowspan"],Je={key:0},Xe=["colspan"],Ye={key:1,class:"border-t border-dashed p-4 mt-2"},Ze=z({__name:"Datatable",props:{items:{default:()=>[]},keyField:{default:""},noDataMsg:{default:"No Data"},itemsPer:{default:50},hasItemsPer:{type:Boolean,default:!0},initialPage:{default:1},searchQuery:{default:""},filter:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},pagination:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},headers:{default:()=>[]},options:{default:()=>[{title:"50",value:50},{title:"100",value:100},{title:"150",value:150}]}},emits:["select-items","ref-form"],setup(n,{emit:O}){const d=O,g=h([]),p=h([]),o=n,k=h(o.initialPage),P=h(o.itemsPer),V=h({}),i=h(null),c=h(o.items.map((e,t)=>({...e,_id:e._id??t,selected:e.selected??!1,disabledSelect:e.disabledSelect??!1}))??[]),C=N(()=>{var e;return((e=o.headers)==null?void 0:e.some(t=>t.filter))??!1}),B=N(()=>Math.ceil(v.value.length/P.value)),v=N(()=>{let e=[...c.value];return o.searchQuery&&(e=e.filter(t=>p.value.some(f=>String(t[f]).toLowerCase().includes(o.searchQuery.toLowerCase())))),Object.keys(V.value).forEach(t=>{const f=V.value[t].toLowerCase();e=e.filter(b=>String(b[t]).toLowerCase().includes(f))}),i.value&&e.sort((t,f)=>{const b=i.value.key;return t[b]<f[b]?i.value.order==="asc"?-1:1:t[b]>f[b]?i.value.order==="asc"?1:-1:0}),e}),_=N(()=>{const e=(k.value-1)*P.value,t=e+P.value;return v.value.slice(e,t)}),T=h({}),se=e=>{const t=e.target.checked;T.value[k.value]=t,_.value.forEach(f=>{f.selected=t&&!f.disabled&&!f.disabledSelect}),q()},q=()=>{const e=c.value.filter(t=>t.selected);d("select-items",e)},Q=e=>{if(g.value=[],p.value=[],e.length===0)return;const t=o.headers||[],f=Object.keys(e[0]).filter(y=>y!=="selected"),b=t.filter(y=>y.visible!==!1),j=new Set(b.map(y=>y.key));if(t.length){g.value=b,p.value=b.map(y=>y.key);return}const I=f.filter(y=>!j.has(y));g.value=I.map(y=>({key:y,label:y})),p.value.push(...I)},le=e=>{var j;const t=g.value.find(I=>I.key===e);if(!(t!=null&&t.sort))return;const b=(((j=i.value)==null?void 0:j.key)===e?i.value.order:null)==="asc"?"desc":"asc";i.value={key:e,order:b},c.value=[...c.value].sort((I,y)=>{const[s,x]=[I[e],y[e]];return s===x?0:b==="asc"?s<x?-1:1:s>x?-1:1})},G=(e,t)=>({...e,_id:e._id??t,selected:e.selected??!1,disabledSelect:e.disabledSelect??!1});E(()=>o.items,()=>{c.value=o.items.map(G),Q(c.value)},{deep:!0});const ae=h(o.options),oe=h(o.options[0]);E(oe,e=>{P.value=e.value,k.value=1});const W=N(()=>o.keyField&&typeof o.keyField=="string"),A=h(""),U=e=>W.value?_.value.filter(t=>String(t[o.keyField])===e).length:0,re=(e,t)=>W.value?_.value.findIndex(f=>String(f[o.keyField])===e)===t:!1,J=h(null);return te(()=>{c.value=o.items.map(G),Q(c.value),d("ref-form",J.value)}),(e,t)=>{const f=ne,b=H,j=ie,I=ge,y=Be;return l(),a("div",X(Y(e.$attrs)),[w(I,X(Y(e.$attrs)),{default:ce(()=>[u("form",{ref_key:"formRef",ref:J,onSubmit:t[1]||(t[1]=pe(()=>{},["prevent"]))},[e.$slots.header?(l(),a("div",Ie,[F(e.$slots,"header",{},void 0,!0)])):m("",!0),u("div",{class:$(["max-h-[calc(100vh-350px)] overflow-auto rounded-b-xl",[{"border-t border-dashed":e.$slots.tableTop}]])},[e.$slots.tableTop?(l(),a("div",De,[F(e.$slots,"tableTop",{},void 0,!0)])):m("",!0),u("table",Fe,[u("thead",Me,[u("tr",Oe,[e.selectable?(l(),a("th",je,[w(f,{checked:r(T)[r(k)]||!1,onClick:se},null,8,["checked"])])):m("",!0),(l(!0),a(M,null,L(r(g),s=>Z((l(),a("th",{key:s.key,scope:"col",class:$(["p-[10px] bg-slate-100 text-gray-800 whitespace-nowrap",[{"cursor-pointer":s.sort},s.style]])},[u("div",{class:"flex min-w-fit",onClick:x=>s.sort?le(s.key):null},[u("div",{class:"inline-flex text-xs font-medium",innerHTML:s.label},null,8,Le),s.sort?(l(),a("div",Te,[w(b,{class:"icon-caret-sort-select-arrow"})])):m("",!0)],8,Ne)],2)),[[ee,s.key!=="_id"]])),128)),e.$slots.action&&r(_).length?(l(),a("th",Ae," Action ")):m("",!0)]),r(C)?(l(),a("tr",Ue,[e.selectable?(l(),a("th",Ke,t[4]||(t[4]=[u("div",{class:"bg-white p-[10px] text-black"},null,-1)]))):m("",!0),(l(!0),a(M,null,L(r(g),s=>(l(),a("th",{key:s.key,class:"p-0"},[u("div",Ee,[s.filter?(l(),K(j,{key:0,modelValue:r(V)[s.key],"onUpdate:modelValue":x=>r(V)[s.key]=x,type:"text"},null,8,["modelValue","onUpdate:modelValue"])):m("",!0)])]))),128))])):m("",!0)]),u("tbody",null,[r(_).length<1?(l(),a("tr",He,[u("td",{colspan:r(g).length+1,class:"align-center text-neutral-900"},[u("div",ze,[e.loading?(l(),K(b,{key:0,class:"icon-loading run text-7xl text-primary-dark"})):(l(),a("p",qe,D(o.noDataMsg||"No Data"),1))])],8,Re)])):m("",!0),(l(!0),a(M,null,L(r(_),(s,x)=>(l(),a(M,{key:x},[u("tr",{class:$(["text-sm mix-border border-l group border-dashed",[{"first:border-b first:border-t-0 border-y":x!=r(_).length-1},U(s[o.keyField])>1?"border-l-primary-dark":"hover:border-l-primary4 border-l-white",s[o.keyField]==r(A)&&U(s[o.keyField])>1?"bg-primary4 hover:bg-primary4-dark":"hover:bg-primary4"]]),onMouseover:S=>A.value=s[o.keyField],onMouseleave:t[0]||(t[0]=S=>A.value="")},[e.selectable?(l(),a("td",{key:0,class:$(["px-3 py-[10px] h-[51px]",{"opacity-30 cursor-not-allowed":s.disabled||s.disabledSelect}])},[w(f,{modelValue:s.selected,"onUpdate:modelValue":S=>s.selected=S,disabled:s.disabled||s.disabledSelect,onChange:q},null,8,["modelValue","onUpdate:modelValue","disabled"])],2)):m("",!0),(l(!0),a(M,null,L(r(p),S=>Z((l(),a("td",{key:S,class:$(["p-[10px] whitespace-nowrap h-[51px]",{"opacity-30 cursor-not-allowed":s.disabled}])},[e.$.slots[S]?m("",!0):(l(),a("span",Ge,D(s[S]),1)),F(e.$slots,S,{item:s},void 0,!0)],2)),[[ee,S!=="_id"]])),128)),e.$slots.action&&re(s[o.keyField],x)?(l(),a("td",{key:1,class:"p-[10px] group-hover:bg-primary4",rowspan:U(s[o.keyField])},[F(e.$slots,"action",{item:s},void 0,!0)],8,We)):m("",!0)],42,Qe),e.$slots.detail?(l(),a("tr",Je,[u("td",{colspan:r(p).length},[u("div",null,[F(e.$slots,"detail",{item:s},void 0,!0)])],8,Xe)])):m("",!0)],64))),128))])])],2),e.$slots.tableBottom?(l(),a("div",Ye,[F(e.$slots,"tableBottom",{},void 0,!0)])):m("",!0)],544)]),_:3},16),e.pagination?(l(),K(y,{key:0,"current-page":r(k),"total-pages":r(B),"items-per-page":r(P),options:r(ae),"has-items-per":e.hasItemsPer,"total-items":r(c).length,"onUpdate:currentPage":t[2]||(t[2]=s=>k.value=s),"onUpdate:itemsPerPage":t[3]||(t[3]=s=>P.value=s)},null,8,["current-page","total-pages","items-per-page","options","has-items-per","total-items"])):m("",!0)],16)}}}),at=R(Ze,[["__scopeId","data-v-97d1f657"]]);export{at as _};
