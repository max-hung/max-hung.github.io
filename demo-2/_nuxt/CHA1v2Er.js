import{_ as X}from"./7NXfChhz.js";import{_ as R}from"./BQedWJ-q.js";import{e as z,r as u,j as Z,C as G,c as k,o as b,a as d,f as A,t as D,H as J,F as N,g as O,u as l,P as K,l as F,b as n,d as v,_ as Q,h as W,i as Y,w as r,s as S}from"./B9-TfvVs.js";import{_ as ee}from"./BYDppEgj.js";import{_ as te}from"./D6QJ4OJq.js";import{_ as oe}from"./Dfz9fpDd.js";import{_ as le}from"./B6lfat1k.js";import{r as se}from"./sGGVUJeg.js";import{u as ne}from"./DiTTqIvM.js";import"./BssDOiam.js";const ae={class:"flex flex-col space-y-1"},re={class:"text-gray-700 font-semibold"},ie={class:"flex justify-center items-center border border-gray-300 rounded-xl px-2 py-1 min-h-[38px]"},ue={class:"flex flex-wrap gap-2"},de=["onClick"],ce=["placeholder"],me={key:0,class:"border rounded-xl mt-1 max-h-40 overflow-y-auto bg-white shadow-lg z-10"},pe=["onClick"],fe=z({__name:"MultiSelect",props:{modelValue:{},label:{},placeholder:{},options:{}},emits:["update:modelValue"],setup(p,{emit:i}){const c=p,$=i,g=u(""),y=u(!1),_=o=>{y.value=o},h=o=>{c.modelValue.includes(o)||$("update:modelValue",[...c.modelValue,o]),g.value="",y.value=!1},P=o=>{const a=[...c.modelValue];a.splice(o,1),$("update:modelValue",a)},I=()=>{$("update:modelValue",[])},w=Z(()=>c.options.filter(o=>o.title.toLowerCase().includes(g.value.toLowerCase())&&!c.modelValue.includes(o.value))),L=o=>{const a=c.options.find(V=>V.value===o);return a?a.title:""};return G(g,o=>{y.value=o!==""}),(o,a)=>{const V=R;return b(),k("div",ae,[d("label",re,D(o.label),1),d("div",ie,[d("div",ue,[(b(!0),k(N,null,O(o.modelValue,(m,x)=>(b(),k("span",{key:x,class:"flex justify-center items-center bg-gray-200 text-gray-800 px-2 py-1 rounded-xl text-sm"},[v(D(L(m))+" ",1),d("button",{type:"button",class:"ml-2 text-gray-500 hover:text-gray-700",onClick:E=>P(x)},[n(V,{class:"icon-X"})],8,de)]))),128))]),l(y)?J((b(),k("input",{key:0,"onUpdate:modelValue":a[0]||(a[0]=m=>F(g)?g.value=m:null),class:"grow focus:outline-hidden",placeholder:o.placeholder,onFocus:a[1]||(a[1]=m=>_(!0)),onBlur:a[2]||(a[2]=m=>_(!1))},null,40,ce)),[[K,l(g)]]):A("",!0),d("button",{type:"button",class:"ml-auto text-gray-500 hover:text-gray-700",onClick:I},[n(V,{class:"icon-X text-lg"})]),d("button",{type:"button",class:"text-gray-500 hover:text-gray-700 ml-2",onClick:a[3]||(a[3]=m=>_(!l(y)))},[n(V,{class:"icon-arrows-directions-down text-lg"})])]),l(y)&&l(w).length>0?(b(),k("div",me,[(b(!0),k(N,null,O(l(w),(m,x)=>(b(),k("div",{key:x,class:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:E=>h(m.value)},D(m.title),9,pe))),128))])):A("",!0)])}}}),ve=Q(fe,[["__scopeId","data-v-46bf51da"]]);async function ge(){return new Promise((p,i)=>{p({data:{list:[{id:1,name:"Max",email:"max.hongliren@gmail.com",createdAt:"2024-02-01T23:54:59.000Z",roleList:[{roleId:1,title:"admin"}]},{id:2,name:"Max2",email:"max.hongliren@gmail.com",createdAt:"2024-02-02T00:21:46.000Z",roleList:[{roleId:1,title:"admin"}]}]}})})}async function ye(p){return new Promise((i,c)=>{i({data:{message:`${p.email} created successfully.`}})})}async function _e(p){return new Promise((i,c)=>{i({data:{message:"Success Delate"}})})}async function xe(p){return new Promise((i,c)=>{i({data:{message:`${p.email} updated successfully.`}})})}const be={class:"flex flex-col gap-4"},we={class:"flex gap-2"},Ve={class:"flex gap-2"},Ce={class:"flex lg:flex-row flex-col lg:justify-between justify-center items-center mb-5"},ke={class:"flex gap-2"},Be=z({__name:"users",setup(p){ne({title:"Users"});const i=u(""),c=u([]),$=u([]),g=u([{key:"name",label:"Name",sort:!0},{key:"email",label:"Email",sort:!0},{key:"roleList",label:"Roles",sort:!0},{key:"edit",label:"Action"}]),y=e=>{c.value=e},_=async()=>{const{data:e}=await ge();e!=null&&e.list.length&&($.value=e==null?void 0:e.list)},h=u([]),P=async()=>{const{data:e}=await se();e!=null&&e.list.length&&(h.value=e==null?void 0:e.list.map(t=>({title:t.title,value:t.id})))},I=u(!1),w=u(!1),L=u(!1),o=u({id:0,name:"",email:"",password:"",roleId:[]}),a=async()=>{try{const{data:e}=await ye(o.value);e!=null&&e.message&&S({title:"Success !",content:e==null?void 0:e.message},"success")}catch(e){S({title:"Error !",content:e},"danger")}finally{_(),C()}},V=async e=>{w.value=!1,P(),e.roleList.length&&(o.value.roleId=e.roleList.map(f=>f.roleId));const{id:t,name:U,email:M}=e;o.value.id=typeof t=="number"?t:parseInt(t||"0",10),o.value.name=U,o.value.email=M},m=async()=>{try{const{data:e}=await xe(o.value);e!=null&&e.message&&S({title:"Success !",content:e==null?void 0:e.message},"success")}catch(e){S({title:"Error !",content:e},"danger")}finally{_(),C()}},x=u(""),E=async()=>{try{const{data:e}=await _e({id:x.value});e!=null&&e.message&&S({title:"Success !",content:e==null?void 0:e.message},"success")}catch(e){S({title:"Error !",content:e},"danger")}finally{_(),C()}},C=()=>{L.value=!1,I.value=!1,x.value="",o.value={id:0,name:"",email:"",password:"",roleId:[]}};return W(()=>{_()}),(e,t)=>{const U=X,M=ve,f=ee,T=te,j=R,q=oe,H=le;return b(),Y(H,null,{default:r(()=>[n(T,{size:"lg",title:l(w)?"Create User":"Edit User","backdrop-close":!1,visible:l(I),onClose:t[5]||(t[5]=s=>C()),onSubmit:t[6]||(t[6]=s=>l(w)?a():m())},{footer:r(()=>[d("div",we,[n(f,{variant:"outline",color:"info",onClick:t[4]||(t[4]=s=>C())},{default:r(()=>t[12]||(t[12]=[v(" Close ")])),_:1}),n(f,{color:"primary",type:"submit"},{default:r(()=>t[13]||(t[13]=[v("Save Changes")])),_:1})])]),default:r(()=>[d("div",be,[n(U,{modelValue:l(o).name,"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).name=s),label:"Name",placeholder:"Name"},null,8,["modelValue"]),n(U,{modelValue:l(o).email,"onUpdate:modelValue":t[1]||(t[1]=s=>l(o).email=s),label:"Email",placeholder:"Email"},null,8,["modelValue"]),n(U,{modelValue:l(o).password,"onUpdate:modelValue":t[2]||(t[2]=s=>l(o).password=s),label:"Password",type:"password",placeholder:"Password"},null,8,["modelValue"]),n(M,{modelValue:l(o).roleId,"onUpdate:modelValue":t[3]||(t[3]=s=>l(o).roleId=s),label:"Roles",placeholder:"Select a role",options:l(h)},null,8,["modelValue","options"])])]),_:1},8,["title","visible"]),n(T,{title:"Delete User","backdrop-close":!1,visible:l(L),onClose:t[8]||(t[8]=s=>C()),onSubmit:t[9]||(t[9]=s=>E())},{footer:r(()=>[d("div",Ve,[n(f,{variant:"outline",color:"info",onClick:t[7]||(t[7]=s=>C())},{default:r(()=>t[14]||(t[14]=[v(" Cancel ")])),_:1}),n(f,{color:"danger",type:"submit"},{default:r(()=>t[15]||(t[15]=[v("Delete")])),_:1})])]),default:r(()=>[t[16]||(t[16]=v(" Are you sure you want to delete this user? "))]),_:1},8,["visible"]),d("div",Ce,[n(U,{modelValue:l(i),"onUpdate:modelValue":t[10]||(t[10]=s=>F(i)?i.value=s:null),placeholder:"Search","icon-left":"icon-zoom"},null,8,["modelValue"]),n(f,{color:"primary",class:"relative",onClick:t[11]||(t[11]=s=>(I.value=!0,w.value=!0,P()))},{default:r(()=>t[17]||(t[17]=[v(" Create User ")])),_:1})]),n(q,{items:l($),"search-query":l(i),selectable:"",headers:l(g),onSelectItems:y},{header:r(()=>t[18]||(t[18]=[d("div",{class:"text-gray-950 text-base font-medium"},"Users",-1)])),roleList:r(({item:s})=>[v(D(s.roleList.map(B=>B.title).toString()),1)]),edit:r(({item:s})=>[d("div",ke,[n(f,{color:"info",variant:"outline",onClick:B=>(I.value=!0,V(s))},{icon:r(()=>[n(j,{class:"icon-edit"})]),default:r(()=>[t[19]||(t[19]=v(" Edit "))]),_:2},1032,["onClick"]),n(f,{color:"danger",onClick:B=>(L.value=!0,x.value=s.id)},{default:r(()=>[n(j,{class:"icon-trash"})]),_:2},1032,["onClick"])])]),_:1},8,["items","search-query","headers"])]),_:1})}}});export{Be as default};
