import{_ as j,g as r,i as O,x as q,m as J,c as f,a as e,w as t,F as K,S as Q,r as a,o as y,h as d,e as c,t as u,U as X,u as D,V as Y,W as ee}from"./index-AqC2jWHn.js";import{d as te}from"./datePickerRange-sdGLcF8M.js";const oe=p=>(Y("data-v-b22c6b58"),p=p(),ee(),p),ae={class:"mb-2"},se={key:0},le={key:1},ne={class:"item-message"},re=oe(()=>c("strong",null,"Bulk upload actions log",-1)),de=183,ce={__name:"Index",setup(p){const _=r(new Date),m=r(new Date),C=new Date,v=new Date,h=O("$toast"),b=r(!1);C.setDate(C.getDate()-de),v.setDate(v.getDate()+1);const I=r([]),l=r({logId:"",details:[],status:""}),i=r(!0),g=r(!1),T=r([{key:"id",label:"Log ID",_props:{color:"primary"}},{key:"startTime",label:"Start Time",_props:{color:"primary"}},{key:"description",label:"Description of operation",_props:{color:"primary"}},{key:"status",label:"Status",_props:{color:"primary"}},{key:"action",label:"",filter:!1,sorter:!1,_props:{color:"primary"}}]),L=r([{key:"orderId",label:"Order Id",_props:{scope:"col",color:"primary"},_style:{width:"30%"}},{key:"message",label:"Message",_props:{scope:"col",color:"primary"},_style:{width:"70%"}}]),k=async()=>{i.value=!0;try{const{data:o}=await Q({dateFrom:_.value.toLocaleDateString("en-ZA"),dateTo:m.value.toLocaleDateString("en-ZA")});console.log(o),I.value=o}catch(o){h.error(o)}finally{i.value=!1}},w=o=>{switch(o){case"Completed":return"success";case"In progress":return"secondary";case"Warning":return"warning";case"Error":return"danger";default:return"primary"}},R=o=>{g.value=!0,l.value.logId=o.id,l.value.orderId=o.orderId,l.value.details=o.details,l.value.status=o.status},P=o=>typeof o=="string"&&o.toLowerCase()=="succeed."?"":"red";return q([_,m],([o,n])=>{b.value=!o||!n}),J(()=>{k()}),(o,n)=>{const F=a("CModalTitle"),E=a("CModalHeader"),S=a("CBadge"),B=a("CSmartTable"),U=a("CModalBody"),x=a("CButton"),A=a("CModalFooter"),H=a("CModal"),N=a("CCardHeader"),V=a("CDateRangePicker"),M=a("CCol"),z=a("CIcon"),G=a("CLoadingButton"),W=a("CRow"),Z=a("CCardBody"),$=a("CCard");return y(),f(K,null,[e(H,{alignment:"center",size:"lg",visible:g.value,onClose:n[1]||(n[1]=()=>g.value=!1)},{default:t(()=>[e(E,null,{default:t(()=>[e(F,null,{default:t(()=>[d("Result Details")]),_:1})]),_:1}),e(U,null,{default:t(()=>[c("div",ae,[d(" Log ID: "+u(l.value.logId)+" ",1),e(S,{color:w(l.value.status)},{default:t(()=>[d(u(l.value.status),1)]),_:1},8,["color"])]),l.value.status==="Error"?(y(),f("div",se,u(l.value.details[0].logStream),1)):(y(),f("div",le,[e(B,{striped:"",responsive:"",pagination:"",itemsPerPage:20,columns:L.value,items:l.value.details},{message:t(({item:s})=>[c("td",{style:X({color:P(s.message)})},[c("div",ne,u(s.message),1)],4)]),_:1},8,["columns","items"])]))]),_:1}),e(A,null,{default:t(()=>[e(x,{color:"secondary",onClick:n[0]||(n[0]=()=>{g.value=!1})},{default:t(()=>[d(" Close ")]),_:1})]),_:1})]),_:1},8,["visible"]),e($,{id:"browser-orders"},{default:t(()=>[e(N,null,{default:t(()=>[re]),_:1}),e(Z,null,{default:t(()=>[e(W,{class:"mb-3",xs:{cols:1},md:{cols:4},xxl:{cols:4}},{default:t(()=>[e(M,null,{default:t(()=>[e(V,{disabled:i.value,ranges:D(te),"start-date":_.value,"onUpdate:startDate":n[2]||(n[2]=s=>_.value=s),"end-date":m.value,"onUpdate:endDate":n[3]||(n[3]=s=>m.value=s),locale:"en-US",minDate:D(C),maxDate:D(v)},null,8,["disabled","ranges","start-date","end-date","minDate","maxDate"])]),_:1}),e(M,null,{default:t(()=>[e(G,{color:"primary",loading:i.value,spinnerType:"grow",onClick:k,disabled:b.value},{default:t(()=>[e(z,{icon:"cilSearch",size:"sm"}),d(" Search ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),e(B,{items:I.value,columns:T.value,loading:i.value,columnSorter:"",pagination:"",itemsPerPageSelect:"","items-per-page":20,tableProps:{hover:!1,responsive:!0,striped:!0}},{status:t(({item:s})=>[c("td",null,[e(S,{color:w(s.status)},{default:t(()=>[d(u(s.status),1)]),_:2},1032,["color"])])]),action:t(({item:s})=>[c("td",null,[e(x,{color:"primary",onClick:ie=>R(s),disabled:s.status==="In progress"},{default:t(()=>[d(" Result Details ")]),_:2},1032,["onClick","disabled"])])]),_:1},8,["items","columns","loading"])]),_:1})]),_:1})],64)}}},_e=j(ce,[["__scopeId","data-v-b22c6b58"]]);export{_e as default};
