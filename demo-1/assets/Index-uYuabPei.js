import{i as z,g as m,r as t,o as s,c as _,a as l,w as e,h as p,j as E,F as f,s as O,u as M,t as N,e as v,k as G,d as k,b as R,l as Z,m as ee,n as le,p as te,q as oe,v as ae}from"./index-jOY3Yhej.js";const ne=v("hr",{class:"mt-2"},null,-1),se={class:"d-grid gap-2 d-md-flex justify-content-md-end"},re={__name:"CreateRole",setup(A){const c=z("$toast"),F=z("reload"),n=m({title:"",action:"",subject:[]}),h=m([]),C=m([]),a=m(!1);async function V(){if(n.value.action==""||n.value.subject.length==0){c.error("Role is required");return}try{const{data:u}=await Z(n.value);c.success(u.message)}catch(u){c.error(u.response.data.message)}finally{F()}}function D(u,d){if(C.value.includes(u)){var y=C.value.indexOf(u);y!==-1&&C.value.splice(y,1)}else h.value=d,C.value.push(u);if(C.value.length==0){n.value.subject=[],n.value.action="";return}n.value.action=h.value,n.value.subject=C.value}return(u,d)=>{const y=t("CButton"),$=t("CModalTitle"),T=t("CModalHeader"),I=t("CFormInput"),o=t("CCol"),r=t("CRow"),x=t("CFormCheck"),j=t("CCallout"),P=t("CForm"),L=t("CModalBody"),q=t("CModal");return s(),_(f,null,[l(y,{variant:"outline",color:"primary",onClick:d[0]||(d[0]=()=>{a.value=!0})},{default:e(()=>[p(" Create Role ")]),_:1}),l(q,{backdrop:"static",visible:a.value,onClose:d[3]||(d[3]=()=>{a.value=!1})},{default:e(()=>[l(T,null,{default:e(()=>[l($,null,{default:e(()=>[p("Create Role")]),_:1})]),_:1}),l(L,null,{default:e(()=>[l(P,{class:"gy-2 align-items-center role-from",onSubmit:E(V,["prevent"])},{default:e(()=>[l(r,null,{default:e(()=>[l(o,{class:"mb-3"},{default:e(()=>[l(I,{floatingLabel:"Role Name",modelValue:n.value.title,"onUpdate:modelValue":d[1]||(d[1]=g=>n.value.title=g),required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:{cols:1},md:{cols:1},xxl:{cols:1}},{default:e(()=>[(s(!0),_(f,null,R(M(O),g=>(s(),_("div",{key:g.group},[l(j,{color:"primary"},{default:e(()=>[v("h3",null,N(g.group),1),(s(!0),_(f,null,R(g.items,w=>(s(),k(o,{key:w.key},{default:e(()=>[(s(!0),_(f,null,R(M(G),(S,B)=>(s(),k(x,{reverse:"",label:w.label,key:B,onClick:H=>D(w.key,S)},null,8,["label","onClick"]))),128))]),_:2},1024))),128))]),_:2},1024)]))),128))]),_:1}),ne,v("div",se,[l(y,{color:"secondary",onClick:d[2]||(d[2]=()=>{a.value=!1})},{default:e(()=>[p(" Close ")]),_:1}),l(y,{color:"primary",type:"submit"},{default:e(()=>[p(" Create Role")]),_:1})])]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}},ue={class:"py-2"},ce={class:"py-2"},de={class:"d-grid gap-2 d-md-flex justify-content-md-end"},ie=v("hr",{class:"mt-2"},null,-1),_e={class:"d-grid gap-2 d-md-flex justify-content-md-end"},me={__name:"RoleList",setup(A){const c=z("$toast"),{proxy:F}=ae(),n=m(!1),h=m([{key:"title",_props:{color:"primary",class:"fw-semibold"}},{key:"subject",_props:{color:"primary",class:"fw-semibold"}},{key:"action",label:"",filter:!1,sorter:!1,_props:{color:"primary",class:"fw-semibold"}}]),C=m([]),a=m({id:"",title:"",action:"",subject:""}),V=m(0),D=m(!0);ee(()=>{u()});async function u(){try{const{data:o}=await le();C.value=o.list}catch(o){c.error(o.response.data.message)}finally{D.value=!1,V.value++}}async function d(){if(a.value.action==""||a.value.subject.length==0){c.error("You no choese rule");return}try{const{data:o}=await te(a.value);c.success(o.message)}catch(o){c.error(o.response.data.message)}finally{u(),n.value=!1}}function y(o){a.value={id:o.id,title:o.title,action:o.action,subject:o.subject}}function $(o){F.$vueAlert.confirm("Do you really want to delete?").then(async()=>{try{const{data:r}=await oe({data:{id:o}});c.success(r.message)}catch(r){c.error(r.response.data.message)}finally{u()}}).catch(()=>{c.default("Cancel")})}function T(o){switch(o){case"all":return"success";default:return"info"}}function I(o,r){if(a.value.subject.includes(o)){var x=a.value.subject.indexOf(o);x!==-1&&a.value.subject.splice(x,1)}else a.value.action=r,a.value.subject.push(o);if(a.value.subject.length==0){a.value.subject=[],a.value.action="";return}}return(o,r)=>{const x=t("CBadge"),j=t("CButton"),P=t("CSmartTable"),L=t("CCardBody"),q=t("CCard"),g=t("CModalTitle"),w=t("CModalHeader"),S=t("CFormInput"),B=t("CCol"),H=t("CRow"),Y=t("CFormCheck"),J=t("CCallout"),K=t("CForm"),Q=t("CModalBody"),W=t("CModal");return s(),_(f,null,[l(q,null,{default:e(()=>[l(L,null,{default:e(()=>[(s(),k(P,{clickableRows:"",key:V.value,tableProps:{striped:!0,hover:!0,responsive:!0},tableHeadProps:{color:"danger"},activePage:1,header:"",items:C.value,columns:h.value,columnFilter:"",loading:D.value,tableFilter:"",cleaner:"",itemsPerPageSelect:"",itemsPerPage:10,columnSorter:"",sorterValue:{column:"status",state:"asc"},pagination:""},{subject:e(({item:i})=>[v("td",ue,[(s(!0),_(f,null,R(i.subject,(b,U)=>(s(),k(x,{class:"me-2",xs:"4",color:T(b),key:U},{default:e(()=>[p(N(b),1)]),_:2},1032,["color"]))),128))])]),action:e(({item:i})=>[v("td",ce,[v("div",de,[l(j,{size:"sm",color:"info",onClick:()=>{n.value=!0,y(i)}},{default:e(()=>[p(" Settings ")]),_:2},1032,["onClick"]),l(j,{size:"sm",color:"danger",class:"ml-1",onClick:b=>$(i.id)},{default:e(()=>[p(" Delete ")]),_:2},1032,["onClick"])])])]),_:1},8,["items","columns","loading"]))]),_:1})]),_:1}),l(W,{backdrop:"static",visible:n.value,onClose:r[3]||(r[3]=()=>{n.value=!1,u()})},{default:e(()=>[l(w,null,{default:e(()=>[l(g,null,{default:e(()=>[p("Edit")]),_:1})]),_:1}),l(Q,null,{default:e(()=>[l(K,{class:"gy-2 align-items-center role-from",onSubmit:E(d,["prevent"])},{default:e(()=>[l(H,null,{default:e(()=>[l(B,{hidden:""},{default:e(()=>[l(S,{floatingLabel:"ID",type:"text",size:"lg",modelValue:a.value.id,"onUpdate:modelValue":r[0]||(r[0]=i=>a.value.id=i),required:""},null,8,["modelValue"])]),_:1}),l(B,{class:"mb-3"},{default:e(()=>[l(S,{floatingLabel:"Title",type:"text",size:"lg",modelValue:a.value.title,"onUpdate:modelValue":r[1]||(r[1]=i=>a.value.title=i),required:""},null,8,["modelValue"])]),_:1})]),_:1}),l(H,{xs:{cols:1},md:{cols:1},xxl:{cols:1}},{default:e(()=>[(s(!0),_(f,null,R(M(O),i=>(s(),_("div",{key:i.group},[l(J,{color:"primary"},{default:e(()=>[v("h3",null,N(i.group),1),(s(!0),_(f,null,R(i.items,b=>(s(),k(B,{key:b.key},{default:e(()=>[(s(!0),_(f,null,R(M(G),(U,X)=>(s(),k(Y,{checked:a.value.subject.includes(b.key),reverse:"",label:b.label,key:X,onClick:pe=>I(b.key,U)},null,8,["checked","label","onClick"]))),128))]),_:2},1024))),128))]),_:2},1024)]))),128))]),_:1}),ie,v("div",_e,[l(j,{color:"secondary",onClick:r[2]||(r[2]=()=>{n.value=!1,u()})},{default:e(()=>[p(" Close ")]),_:1}),l(j,{color:"primary",type:"submit"},{default:e(()=>[p("Save changes")]),_:1})])]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}},fe={__name:"Index",setup(A){return(c,F)=>{const n=t("CCol"),h=t("CRow");return s(),k(h,{xs:{cols:1},md:{cols:1},xxl:{cols:1}},{default:e(()=>[l(n,null,{default:e(()=>[l(M(re))]),_:1}),l(n,{class:"mt-2"},{default:e(()=>[l(M(me))]),_:1})]),_:1})}}};export{fe as default};
