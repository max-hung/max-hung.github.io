import{_ as I,a as T}from"./CwTW5K4F.js";import{o as _,c as x,n as h,g as M,h as z,r as b,j as N,K,k as S,w as k,a as o,m as f,b as v,d as A,t as E,x as R,L as P,v as F,F as Q,M as H,z as D,l as U,_ as W,i as Z,N as ee,y as q,p as te,e as se,q as ne,B as oe,A as O,O as B,H as ie,P as le,I as re}from"./BxlJDD92.js";import{_ as X}from"./6mP1Qf_R.js";import{_ as ae}from"./CPvqtkxu.js";import{u as ce}from"./pg8AI4ca.js";import{u as ue}from"./DSoj0xBr.js";const me={__name:"BaseDivider",props:{navBar:Boolean},setup(e){const m=e;return(s,a)=>(_(),x("hr",{class:h([m.navBar?"lg:my-0.5 bg-neutral-200":"my-6 -mx-60","border-t border-neutral-200"])},null,2))}},de=M({__name:"NavBarItem",props:{item:{}},emits:["menu-click"],setup(e,{emit:m}){const s=e,a=m,c=z(()=>s.item.href?"a":s.item.to?X:"div"),i=z(()=>{const n=[t.value?"text-slate-400":"text-black",s.item.menu?"":"p-3",s.item.isCurrentUser?"":"border border-transparent hover:bg-gray-100 hover:border hover:rounded-lg"];return s.item.isDesktopNoLabel&&n.push("w-16","justify-center"),n}),t=b(!1),l=n=>{a("menu-click",n,s.item),s.item.menu&&(t.value=!t.value)},r=(n,w)=>{a("menu-click",n,w)},d=b(null),p=n=>{d.value&&!d.value.contains(n.target)&&(t.value=!1)};return N(()=>{s.item.menu&&window.addEventListener("click",p)}),K(()=>{s.item.menu&&window.removeEventListener("click",p)}),(n,w)=>{const L=me,y=I,g=Y;return n.item.isDivider?(_(),S(L,{key:0,"nav-bar":""})):(_(),S(P(f(c)),{key:1,ref_key:"root",ref:d,class:"flex items-center justify-center relative cursor-pointer w-full lg:w-auto",to:n.item.to??null,target:n.item.target??null,onClick:l},{default:k(()=>[o("div",{class:h(["flex justify-center items-center",{"bg-transparent":n.item.menu}])},[o("span",{class:h(["lg:m-2 transition-colors",{hidden:n.item.isDesktopNoLabel&&n.item.icon,"w-34":!n.item.isCurrentUser}])},[o("div",{class:h(["flex justify-center items-center",[n.item.isCurrentUser?"border rounded-full text-sm font-semibold w-10 h-10 lg:mr-2":["gap-1",...f(i)]]])},[v(y,{class:h([n.item.icon,"text-xl text-zinc-600"])},null,8,["class"]),A(" "+E(n.item.label),1)],2)],2)],2),n.item.menu?(_(),x("div",{key:0,class:h(["text-sm bg-white border border-neutral-300 absolute top-full -left-10 lg:-left-20 min-w-full z-20 rounded-lg shadow-lg",{hidden:!f(t)}])},[v(g,{menu:n.item.menu,onMenuClick:r},null,8,["menu"])],2)):R("",!0)]),_:1},8,["to","target"]))}}}),Y=M({__name:"NavBarMenuList",props:{menu:{}},emits:["menu-click"],setup(e,{emit:m}){const s=m,a=(c,i)=>{s("menu-click",c,i)};return(c,i)=>{const t=de;return _(!0),x(Q,null,F(c.menu,(l,r)=>(_(),S(t,{key:r,item:l,onMenuClick:a},null,8,["item"]))),128)}}}),pe={class:"fixed inset-x-0 top-0 h-[68px] z-30 bg-white border-b border-b-color-transparent-dark"},fe={class:"md:min-w-full flex lg:justify-between h-[68px]"},ve=M({__name:"NavBar",props:{menu:{}},emits:["menu-click"],setup(e,{emit:m}){const s=m,a=(t,l)=>{s("menu-click",t,l)},c=b(!1),i=()=>{c.value=window.scrollY>0};return N(()=>{window.addEventListener("scroll",i)}),H(()=>{window.removeEventListener("scroll",i)}),(t,l)=>{const r=Y;return _(),x("nav",pe,[o("div",fe,[D(t.$slots,"default"),v(r,{menu:t.menu,onMenuClick:a},null,8,["menu"])])])}}}),_e={key:0,class:"modal-bg"},xe={class:"flex justify-between items-center border-b border-dashed p-4"},we={key:0,class:"flex justify-end border-t border-dashed p-4"},ge=M({__name:"Modal",props:{title:{type:String,default:""},backdropClose:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},size:{type:String,default:"default"}},emits:["close","submit"],setup(e,{emit:m}){const s=e,a=m,c=()=>{a("close")},i=()=>{a("submit")},t=r=>{r.key==="Escape"&&c()},l=z(()=>({default:"max-h-[350px] md:w-[500px]",lg:"max-h-[550px] md:w-[600px]",xl:"max-h-[600px] md:w-[900px]",full:"max-h-[calc(100vh-140px)]"})[s.size]);return N(()=>{document.addEventListener("keydown",t)}),K(()=>{document.removeEventListener("keydown",t)}),(r,d)=>{const p=I;return e.visible?(_(),x("section",_e,[o("div",{class:"absolute w-full h-screen",onClick:d[0]||(d[0]=n=>e.backdropClose&&c())}),o("div",{class:h(["bg-white border z-50 border-gray-200 rounded-default w-auto",[s.size=="full"?"md:min-w-[500px]":""]])},[o("form",{onSubmit:d[2]||(d[2]=U(n=>i(),["prevent"]))},[o("div",xe,[o("h5",null,E(e.title),1),o("div",null,[v(p,{class:"icon-X text-xl text-gray-500 hover:opacity-80",onClick:d[1]||(d[1]=n=>c())})])]),o("div",{class:h(["px-4 py-6 overflow-auto",[f(l)]])},[D(r.$slots,"default",{},void 0,!0)],2),r.$slots.footer?(_(),x("div",we,[D(r.$slots,"footer",{},void 0,!0)])):R("",!0)],32)],2)])):R("",!0)}}}),be=W(ge,[["__scopeId","data-v-20099698"]]),V=e=>(te("data-v-9e332efa"),e=e(),se(),e),he={class:"w-[251.5px] mx-auto"},ke={class:"flex gap-2"},ye={class:"flex flex-row p-2 rounded-3xl group hover:bg-color-transparent-base"},Ce={key:0,class:"flex cursor-pointer text-black px-5 py-4"},Me=V(()=>o("div",{class:"cover-record group-hover:opacity-0"},null,-1)),$e={class:"flex justify-start items-center truncate text-base text-neutral-900"},Be={key:1},Le=V(()=>o("div",null,"Rename",-1)),Ae=V(()=>o("div",null,"Delete",-1)),ze=M({__name:"AsideMenuItem",props:{item:{type:Object,required:!0,validator:e=>(console.log(e.to),e.to&&!e.to.startsWith("/chat/")&&(e.to=`/chat/${e.to}`),!0)}},emits:["menu-click"],setup(e,{emit:m}){const s=e,a=m,c=g=>{a("menu-click",g,s.item)},i=b("mt-8"),t=()=>{q(()=>{const g=document.querySelector(".show-action");if(g){const u=g.getBoundingClientRect(),$=window.innerHeight;i.value=u.top>$/2?"-mt-56":"mt-0"}})},l=b(!1),r=g=>{const u=document.querySelector(".show-action");u&&!u.contains(g.target)&&(l.value=!1)},d=b(null),p=b(!1),n=()=>{p.value=!0,l.value=!1,q(()=>{var g,u;(u=(g=d.value)==null?void 0:g.inputElement)==null||u.focus()})},w=b(null),L=()=>{w.value&&a("menu-click",new MouseEvent("click"),{room:w.value,action:"delete"}),y.value=!1,w.value=null},y=b(!1);return Z(l,async g=>{g&&t()}),N(()=>{document.addEventListener("click",r),window.addEventListener("resize",t)}),H(()=>{document.removeEventListener("click",r),window.removeEventListener("resize",t)}),(g,u)=>{const $=ae,G=be,J=T,j=I;return _(),x("li",he,[v(G,{"backdrop-close":!1,visible:f(y),onClose:u[1]||(u[1]=()=>{y.value=!1,w.value=null})},{footer:k(()=>[o("div",ke,[v($,{class:"border border-gray-500",variant:"outline",onClick:u[0]||(u[0]=C=>y.value=!1)},{default:k(()=>[A(" Close ")]),_:1}),v($,{class:"bg-red-500 text-white",onClick:L},{default:k(()=>[A(" Delete Room ")]),_:1})])]),default:k(()=>[A(" Are you sure you want to delete this room: "),o("b",null,E(f(w)),1),A("? ")]),_:1},8,["visible"]),o("div",ye,[(_(),S(P(e.item.to?f(X):"a"),{to:e.item.to,onClick:c},{default:k(()=>[f(p)?(_(),x("div",Be,[v(J,{modelValue:e.item.label,"onUpdate:modelValue":u[2]||(u[2]=C=>e.item.label=C),onBlur:u[3]||(u[3]=C=>p.value=!1),onKeyup:u[4]||(u[4]=ee(C=>p.value=!1,["enter"])),ref_key:"inputRef",ref:d},null,8,["modelValue"])])):(_(),x("div",Ce,[Me,o("div",$e,E(e.item.label),1)]))]),_:1},8,["to"])),v(j,{class:"flex-none icon-more-horizontal pl-3 lg:group-hover:text-black lg:text-white text-black ml-auto",onClick:u[5]||(u[5]=U(C=>l.value=!f(l),["stop"]))})]),f(l)?(_(),x("div",{key:0,class:h(`show-action p-2 flex flex-col items-center z-10 bg-white border w-[133px] border-gray-200 right-4 absolute rounded-lg shadow-lg ${f(i)}`),onClick:u[8]||(u[8]=U(()=>{},["stop"]))},[v($,{class:"item",onClick:u[6]||(u[6]=C=>n())},{default:k(()=>[v(j,{class:"icon-pen-write-edit text-gray-400"}),Le]),_:1}),v($,{class:"item text-red-600 pointer-events-auto",onClick:u[7]||(u[7]=C=>{l.value=!1,w.value=e.item.label,y.value=!0})},{default:k(()=>[v(j,{class:"icon-trash"}),Ae]),_:1})],2)):R("",!0)])}}}),Se=W(ze,[["__scopeId","data-v-9e332efa"]]),Ee={__name:"AsideMenuList",props:{isDropdownList:Boolean,menu:{type:Array,required:!0},filterMenu:{type:String,default:""}},emits:["menu-click"],setup(e,{emit:m}){const s=e,a=m,c=(t,l)=>{a("menu-click",t,l)},i=z(()=>{if(s.menu.length)return s.menu.slice().reverse().filter(t=>t.label.toLowerCase().includes(s.filterMenu.toLowerCase()))});return(t,l)=>{const r=Se;return _(),x("div",null,[o("ul",null,[(_(!0),x(Q,null,F(f(i),(d,p)=>(_(),S(r,{key:p,item:d,onMenuClick:c},null,8,["item"]))),128))])])}}},Ie={class:"sticky top-[68px] w-[295px] bg-white z-10"},Ne={class:"flex justify-center items-center py-2 px-7"},Re={class:"overflow-y-auto overflow-x-hidden h-full pt-5 pb-[150px] px-2"},De={class:"flex justify-between items-center py-7 px-7"},je={class:"text-neutral-900"},Ue={__name:"AsideMenuLayer",props:{menu:{type:Array,required:!0},isAsideActive:{type:Boolean,required:!0}},emits:["menu-click"],setup(e,{emit:m}){const s=b(""),a=m,c=z(()=>({label:"New Chat",icon:"icon-chat",isLogout:!0})),i=(l,r)=>{a("menu-click",l,r)},t=()=>{oe("/chat")};return(l,r)=>{const d=T,p=Ee,n=I;return _(),x("aside",{id:"aside",class:h(["h-screen fixed w-[295px] bg-white transition-position z-10",[e.isAsideActive?"-left-[295px]":"left-0"]])},[o("div",Ie,[o("div",Ne,[v(d,{modelValue:f(s),"onUpdate:modelValue":r[0]||(r[0]=w=>ne(s)?s.value=w:null),"bg-color":"bg-gray-100",type:"text",icon:"icon-search",placeholder:"Search"},null,8,["modelValue"])])]),o("div",Re,[v(p,{menu:e.menu,"filter-menu":f(s),onMenuClick:i},null,8,["menu","filter-menu"])]),o("div",{class:"sticky bottom-0 w-[295px] border-t bg-white cursor-pointer text-color-primary hover:text-color-secondary z-10",onClick:r[1]||(r[1]=w=>t())},[o("div",De,[o("div",je,E(f(c).label),1),v(n,{class:h([f(c).icon,"text-xl"])},null,8,["class"])])])],2)}}},He=M({__name:"AsideMenu",props:{menu:{type:Array,required:!0},isAsideActive:Boolean},emits:["menu-click"],setup(e,{emit:m}){const s=m,a=(c,i)=>{s("menu-click",c,i)};return(c,i)=>{const t=Ue;return _(),x("div",null,[v(t,{menu:e.menu,"is-aside-active":e.isAsideActive,onMenuClick:a},null,8,["menu","is-aside-active"])])}}}),Ve=()=>{const e=O("messages",b([])),m=O("messagesHistory",b([])),s=t=>{e.value.push({userMessage:t.userMessage,assistantMessage:`這是機器人回覆：「${t.userMessage}」`})},a=t=>{m.value=[{userMessage:"這是舊訊息 1",assistantMessage:"這是機器人的回覆 1"},{userMessage:"這是舊訊息 2",assistantMessage:"這是機器人的回覆 2"}]},c=t=>{e.value=[]},i=t=>{console.log(`房間 ${t} 被刪除`)};return B("messages",e),B("messagesHistory",m),B("leaveRoom",c),B("sendMessage",s),B("getHistory",a),B("deleteRoom",i),{messages:e,messagesHistory:m,leaveRoom:c,sendMessage:s,getHistory:a,deleteRoom:i}},qe=[{isCurrentUser:!0,icon:"icon-account",menu:[{label:"Log Out",icon:"icon-logout",isLogout:!0}]}],Oe={class:"pt-[68px] h-auto w-screen md:w-auto transition-position"},Te={class:"flex w-[295px]"},Ye=M({__name:"authenticated",setup(e){const s=re().app.baseURL+"img/logo_min.svg",a=ce();ue({title:"Chat Helper"}),Ve();const c=ie(),i=b(!1);b([]);const t=le(),l=()=>{i.value=window.matchMedia("(max-width: 768px)").matches},r=async(d,p)=>{p.isLogout&&await c.logout(),p.action==="delete"&&(a.roomList=a.roomList.filter(n=>n.label!==p.room)),p.action==="rename"&&console.log("rename")};return t.beforeEach(()=>{l()}),N(()=>{const d=window.matchMedia("(max-width: 768px)");l(),d.addEventListener("change",l)}),H(()=>{window.matchMedia("(max-width: 768px)").removeEventListener("change",l)}),(d,p)=>{const n=I,w=ve,L=He;return _(),x("div",Oe,[v(w,{menu:f(qe),onMenuClick:r},{default:k(()=>[o("div",Te,[o("div",{class:"flex justify-center items-center border-r border-r-color-transparent-dark py-3 px-5 w-[130px]",onClick:p[0]||(p[0]=y=>i.value=!f(i))},[v(n,{class:"icon-sidebar text-2xl"})]),o("div",{class:"flex border-r border-r-color-transparent-dark py-3 px-5 w-[165px]"},[o("img",{src:s,class:"w-full"})])])]),_:1},8,["menu"]),v(L,{"is-aside-active":f(i),menu:f(a).roomList,onMenuClick:r},null,8,["is-aside-active","menu"]),o("div",{class:h(["md:fixed transition-all z-0",f(i)?"inset-x-0 w-screen":"md:left-[295px] md:w-[calc(100vw-295px)]"])},[D(d.$slots,"default")],2)])}}});export{Ye as default};
