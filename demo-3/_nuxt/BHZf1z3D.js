import{_ as E,a as T}from"./sxhHlFwC.js";import{o as v,c as x,n as b,g as M,h as A,r as g,j as I,K,k as S,w as k,a as o,m as p,b as f,d as L,t as z,x as R,L as P,v as F,F as Q,M as U,z as D,l as H,_ as W,i as Z,N as ee,y as q,p as te,e as se,q as oe,B as ne,A as O,O as B,f as ie,H as le,P as re}from"./CID31oHE.js";import{_ as X}from"./CoO4Bk52.js";import{_ as ae}from"./Bme0EopM.js";import{u as ce}from"./BApLe2eW.js";import{u as ue}from"./zdu_-MOk.js";const me={__name:"BaseDivider",props:{navBar:Boolean},setup(e){const u=e;return(s,l)=>(v(),x("hr",{class:b([u.navBar?"lg:my-0.5 bg-neutral-200":"my-6 -mx-60","border-t border-neutral-200"])},null,2))}},de=M({__name:"NavBarItem",props:{item:{}},emits:["menu-click"],setup(e,{emit:u}){const s=e,l=u,a=A(()=>s.item.href?"a":s.item.to?X:"div"),r=A(()=>{const n=[t.value?"text-slate-400":"text-black",s.item.menu?"":"p-3",s.item.isCurrentUser?"":"border border-transparent hover:bg-gray-100 hover:border hover:rounded-lg"];return s.item.isDesktopNoLabel&&n.push("w-16","justify-center"),n}),t=g(!1),m=n=>{l("menu-click",n,s.item),s.item.menu&&(t.value=!t.value)},i=(n,w)=>{l("menu-click",n,w)},d=g(null),_=n=>{d.value&&!d.value.contains(n.target)&&(t.value=!1)};return I(()=>{s.item.menu&&window.addEventListener("click",_)}),K(()=>{s.item.menu&&window.removeEventListener("click",_)}),(n,w)=>{const N=me,y=E,h=Y;return n.item.isDivider?(v(),S(N,{key:0,"nav-bar":""})):(v(),S(P(p(a)),{key:1,ref_key:"root",ref:d,class:"flex items-center justify-center relative cursor-pointer w-full lg:w-auto",to:n.item.to??null,target:n.item.target??null,onClick:m},{default:k(()=>[o("div",{class:b(["flex justify-center items-center",{"bg-transparent":n.item.menu}])},[o("span",{class:b(["lg:m-2 transition-colors",{hidden:n.item.isDesktopNoLabel&&n.item.icon,"w-34":!n.item.isCurrentUser}])},[o("div",{class:b(["flex justify-center items-center",[n.item.isCurrentUser?"border rounded-full text-sm font-semibold w-10 h-10 lg:mr-2":["gap-1",...p(r)]]])},[f(y,{class:b([n.item.icon,"text-xl text-zinc-600"])},null,8,["class"]),L(" "+z(n.item.label),1)],2)],2)],2),n.item.menu?(v(),x("div",{key:0,class:b(["text-sm bg-white border border-neutral-300 absolute top-full -left-10 lg:-left-20 min-w-full z-20 rounded-lg shadow-lg",{hidden:!p(t)}])},[f(h,{menu:n.item.menu,onMenuClick:i},null,8,["menu"])],2)):R("",!0)]),_:1},8,["to","target"]))}}}),Y=M({__name:"NavBarMenuList",props:{menu:{}},emits:["menu-click"],setup(e,{emit:u}){const s=u,l=(a,r)=>{s("menu-click",a,r)};return(a,r)=>{const t=de;return v(!0),x(Q,null,F(a.menu,(m,i)=>(v(),S(t,{key:i,item:m,onMenuClick:l},null,8,["item"]))),128)}}}),pe={class:"fixed inset-x-0 top-0 h-[68px] z-30 transition-position border-b border-b-color-transparent-dark"},fe={class:"md:min-w-full flex lg:justify-between h-[68px]"},ve=M({__name:"NavBar",props:{menu:{}},emits:["menu-click"],setup(e,{emit:u}){const s=u,l=(t,m)=>{s("menu-click",t,m)},a=g(!1),r=()=>{a.value=window.scrollY>0};return I(()=>{window.addEventListener("scroll",r)}),U(()=>{window.removeEventListener("scroll",r)}),(t,m)=>{const i=Y;return v(),x("nav",pe,[o("div",fe,[D(t.$slots,"default"),f(i,{menu:t.menu,onMenuClick:l},null,8,["menu"])])])}}}),_e={key:0,class:"modal-bg"},xe={class:"flex justify-between items-center border-b border-dashed p-4"},we={key:0,class:"flex justify-end border-t border-dashed p-4"},he=M({__name:"Modal",props:{title:{type:String,default:""},backdropClose:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},size:{type:String,default:"default"}},emits:["close","submit"],setup(e,{emit:u}){const s=e,l=u,a=()=>{l("close")},r=()=>{l("submit")},t=i=>{i.key==="Escape"&&a()},m=A(()=>({default:"max-h-[350px] md:w-[500px]",lg:"max-h-[550px] md:w-[600px]",xl:"max-h-[600px] md:w-[900px]",full:"max-h-[calc(100vh-140px)]"})[s.size]);return I(()=>{document.addEventListener("keydown",t)}),K(()=>{document.removeEventListener("keydown",t)}),(i,d)=>{const _=E;return e.visible?(v(),x("section",_e,[o("div",{class:"absolute w-full h-screen",onClick:d[0]||(d[0]=n=>e.backdropClose&&a())}),o("div",{class:b(["bg-white border z-50 border-gray-200 rounded-default w-auto",[s.size=="full"?"md:min-w-[500px]":""]])},[o("form",{onSubmit:d[2]||(d[2]=H(n=>r(),["prevent"]))},[o("div",xe,[o("h5",null,z(e.title),1),o("div",null,[f(_,{class:"icon-X text-xl text-gray-500 hover:opacity-80",onClick:d[1]||(d[1]=n=>a())})])]),o("div",{class:b(["px-4 py-6 overflow-auto",[p(m)]])},[D(i.$slots,"default",{},void 0,!0)],2),i.$slots.footer?(v(),x("div",we,[D(i.$slots,"footer",{},void 0,!0)])):R("",!0)],32)],2)])):R("",!0)}}}),ge=W(he,[["__scopeId","data-v-20099698"]]),V=e=>(te("data-v-9e332efa"),e=e(),se(),e),be={class:"w-[251.5px] mx-auto"},ke={class:"flex gap-2"},ye={class:"flex flex-row p-2 rounded-3xl group hover:bg-color-transparent-base"},Ce={key:0,class:"flex cursor-pointer text-black px-5 py-4"},Me=V(()=>o("div",{class:"cover-record group-hover:opacity-0"},null,-1)),$e={class:"flex justify-start items-center truncate text-base text-neutral-900"},Be={key:1},Le=V(()=>o("div",null,"Rename",-1)),Ae=V(()=>o("div",null,"Delete",-1)),Se=M({__name:"AsideMenuItem",props:{item:{type:Object,required:!0,validator:e=>(console.log(e.to),e.to&&!e.to.startsWith("/chat/")&&(e.to=`/chat/${e.to}`),!0)}},emits:["menu-click"],setup(e,{emit:u}){const s=e,l=u,a=h=>{l("menu-click",h,s.item)},r=g("mt-8"),t=()=>{q(()=>{const h=document.querySelector(".show-action");if(h){const c=h.getBoundingClientRect(),$=window.innerHeight;r.value=c.top>$/2?"-mt-56":"mt-0"}})},m=g(!1),i=h=>{const c=document.querySelector(".show-action");c&&!c.contains(h.target)&&(m.value=!1)},d=g(null),_=g(!1),n=()=>{_.value=!0,m.value=!1,q(()=>{var h,c;(c=(h=d.value)==null?void 0:h.inputElement)==null||c.focus()})},w=g(null),N=()=>{w.value&&l("menu-click",new MouseEvent("click"),{room:w.value,action:"delete"}),y.value=!1,w.value=null},y=g(!1);return Z(m,async h=>{h&&t()}),I(()=>{document.addEventListener("click",i),window.addEventListener("resize",t)}),U(()=>{document.removeEventListener("click",i),window.removeEventListener("resize",t)}),(h,c)=>{const $=ae,G=ge,J=T,j=E;return v(),x("li",be,[f(G,{"backdrop-close":!1,visible:p(y),onClose:c[1]||(c[1]=()=>{y.value=!1,w.value=null})},{footer:k(()=>[o("div",ke,[f($,{class:"border border-gray-500",variant:"outline",onClick:c[0]||(c[0]=C=>y.value=!1)},{default:k(()=>[L(" Close ")]),_:1}),f($,{class:"bg-red-500 text-white",onClick:N},{default:k(()=>[L(" Delete Room ")]),_:1})])]),default:k(()=>[L(" Are you sure you want to delete this room: "),o("b",null,z(p(w)),1),L("? ")]),_:1},8,["visible"]),o("div",ye,[(v(),S(P(e.item.to?p(X):"a"),{to:e.item.to,onClick:a},{default:k(()=>[p(_)?(v(),x("div",Be,[f(J,{modelValue:e.item.label,"onUpdate:modelValue":c[2]||(c[2]=C=>e.item.label=C),onBlur:c[3]||(c[3]=C=>_.value=!1),onKeyup:c[4]||(c[4]=ee(C=>_.value=!1,["enter"])),ref_key:"inputRef",ref:d},null,8,["modelValue"])])):(v(),x("div",Ce,[Me,o("div",$e,z(e.item.label),1)]))]),_:1},8,["to"])),f(j,{class:"flex-none icon-more-horizontal pl-3 lg:group-hover:text-black lg:text-white text-black ml-auto",onClick:c[5]||(c[5]=H(C=>m.value=!p(m),["stop"]))})]),p(m)?(v(),x("div",{key:0,class:b(`show-action p-2 flex flex-col items-center z-10 bg-white border w-[133px] border-gray-200 right-4 absolute rounded-lg shadow-lg ${p(r)}`),onClick:c[8]||(c[8]=H(()=>{},["stop"]))},[f($,{class:"item",onClick:c[6]||(c[6]=C=>n())},{default:k(()=>[f(j,{class:"icon-pen-write-edit text-gray-400"}),Le]),_:1}),f($,{class:"item text-red-600 pointer-events-auto",onClick:c[7]||(c[7]=C=>{m.value=!1,w.value=e.item.label,y.value=!0})},{default:k(()=>[f(j,{class:"icon-trash"}),Ae]),_:1})],2)):R("",!0)])}}}),ze=W(Se,[["__scopeId","data-v-9e332efa"]]),Ee={__name:"AsideMenuList",props:{isDropdownList:Boolean,menu:{type:Array,required:!0},filterMenu:{type:String,default:""}},emits:["menu-click"],setup(e,{emit:u}){const s=e,l=u,a=(t,m)=>{l("menu-click",t,m)},r=A(()=>{if(s.menu.length)return s.menu.slice().reverse().filter(t=>t.label.toLowerCase().includes(s.filterMenu.toLowerCase()))});return(t,m)=>{const i=ze;return v(),x("div",null,[o("ul",null,[(v(!0),x(Q,null,F(p(r),(d,_)=>(v(),S(i,{key:_,item:d,onMenuClick:a},null,8,["item"]))),128))])])}}},Ie={class:"flex flex-col overflow-hidden bg-white"},Ne={class:"fixed z-20 top-[68px] w-[295px] bg-white"},Re={class:"flex justify-center items-center pt-7 px-7"},De={class:"overflow-y-auto overflow-x-hidden px-2 pt-[90px] pb-[150px]"},je={class:"flex justify-between items-center py-7 px-7"},He={class:"text-neutral-900"},Ue={__name:"AsideMenuLayer",props:{menu:{type:Array,required:!0},isAsideActive:{type:Boolean,required:!0}},emits:["menu-click"],setup(e,{emit:u}){const s=g(""),l=u,a=A(()=>({label:"New Chat",icon:"icon-chat",isLogout:!0})),r=(m,i)=>{l("menu-click",m,i)},t=()=>{ne("/chat")};return(m,i)=>{const d=T,_=Ee,n=E;return v(),x("aside",{id:"aside",class:b(["h-screen overflow-auto fixed w-[295px] bg-white transition-position z-10",[e.isAsideActive?"-left-[295px]":"left-0"]])},[o("div",Ie,[o("div",Ne,[o("div",Re,[f(d,{modelValue:p(s),"onUpdate:modelValue":i[0]||(i[0]=w=>oe(s)?s.value=w:null),"bg-color":"bg-gray-100",type:"text",icon:"icon-search",placeholder:"Search"},null,8,["modelValue"])])]),o("div",De,[f(_,{menu:e.menu,"filter-menu":p(s),onMenuClick:r},null,8,["menu","filter-menu"])]),o("div",{class:"fixed bottom-0 w-[295px] border-t bg-white cursor-pointer text-color-primary hover:text-color-secondary",onClick:i[1]||(i[1]=w=>t())},[o("div",je,[o("div",He,z(p(a).label),1),f(n,{class:b([p(a).icon,"text-xl"])},null,8,["class"])])])])],2)}}},Ve=M({__name:"AsideMenu",props:{menu:{type:Array,required:!0},isAsideActive:Boolean},emits:["menu-click"],setup(e,{emit:u}){const s=u,l=(a,r)=>{s("menu-click",a,r)};return(a,r)=>{const t=Ue;return v(),x("div",null,[f(t,{menu:e.menu,"is-aside-active":e.isAsideActive,onMenuClick:l},null,8,["menu","is-aside-active"])])}}}),qe=()=>{const e=O("messages",g([])),u=O("messagesHistory",g([])),s=t=>{e.value.push({userMessage:t.userMessage,assistantMessage:`這是機器人回覆：「${t.userMessage}」`})},l=t=>{u.value=[{userMessage:"這是舊訊息 1",assistantMessage:"這是機器人的回覆 1"},{userMessage:"這是舊訊息 2",assistantMessage:"這是機器人的回覆 2"}]},a=t=>{e.value=[]},r=t=>{console.log(`房間 ${t} 被刪除`)};return B("messages",e),B("messagesHistory",u),B("leaveRoom",a),B("sendMessage",s),B("getHistory",l),B("deleteRoom",r),{messages:e,messagesHistory:u,leaveRoom:a,sendMessage:s,getHistory:l,deleteRoom:r}},Oe=ie("/img/logo_min.svg"),Te=[{isCurrentUser:!0,icon:"icon-account",menu:[{label:"Log Out",icon:"icon-logout",isLogout:!0}]}],Ke={class:"pt-[68px] h-auto w-screen md:w-auto transition-position"},Pe={class:"flex w-[295px]"},Fe=o("div",{class:"flex border-r border-r-color-transparent-dark py-3 px-5 w-[165px]"},[o("img",{src:Oe,class:"w-full"})],-1),Ze=M({__name:"authenticated",setup(e){const u=ce();ue({title:"Chat Helper"}),qe();const s=le(),l=g(!1);g([]);const a=re(),r=()=>{l.value=window.matchMedia("(max-width: 768px)").matches},t=async()=>{},m=async(i,d)=>{d.isLogout&&await s.logout(),d.action==="delete"&&(u.roomList=u.roomList.filter(_=>_.label!==d.room)),d.action==="rename"&&console.log("rename")};return a.beforeEach(()=>{r(),t()}),I(()=>{const i=window.matchMedia("(max-width: 768px)");r(),i.addEventListener("change",r),t()}),U(()=>{window.matchMedia("(max-width: 768px)").removeEventListener("change",r)}),(i,d)=>{const _=E,n=ve,w=Ve;return v(),x("div",Ke,[f(n,{menu:p(Te),onMenuClick:m},{default:k(()=>[o("div",Pe,[o("div",{class:"flex justify-center items-center border-r border-r-color-transparent-dark py-3 px-5 w-[130px]",onClick:d[0]||(d[0]=N=>l.value=!p(l))},[f(_,{class:"icon-sidebar text-2xl"})]),Fe])]),_:1},8,["menu"]),f(w,{"is-aside-active":p(l),menu:p(u).roomList,onMenuClick:m},null,8,["is-aside-active","menu"]),o("div",{class:b(["md:fixed transition-all z-0",p(l)?"inset-x-0 w-screen":"md:left-[295px] md:w-[calc(100vw-295px)]"])},[D(i.$slots,"default")],2)])}}});export{Ze as default};
