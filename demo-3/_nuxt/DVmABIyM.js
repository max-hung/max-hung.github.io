import{_ as E,a as T}from"./EJOI-xYI.js";import{o as v,c as x,n as g,g as M,h as A,r as b,j as I,K,k as S,w as k,a as n,m as p,b as f,d as L,t as z,x as R,L as P,v as F,F as Q,M as U,z as D,l as H,_ as W,i as Z,N as ee,y as q,p as te,e as se,q as oe,B as ne,A as O,O as B,f as ie,H as le,P as re}from"./Dr603ncN.js";import{_ as X}from"./DCduqa6l.js";import{_ as ae}from"./CxkTBfO2.js";import{u as ce}from"./BCwL2CNx.js";import{u as ue}from"./C5uuniar.js";const me={__name:"BaseDivider",props:{navBar:Boolean},setup(e){const u=e;return(s,l)=>(v(),x("hr",{class:g([u.navBar?"lg:my-0.5 bg-neutral-200":"my-6 -mx-60","border-t border-neutral-200"])},null,2))}},de=M({__name:"NavBarItem",props:{item:{}},emits:["menu-click"],setup(e,{emit:u}){const s=e,l=u,a=A(()=>s.item.href?"a":s.item.to?X:"div"),r=A(()=>{const o=[t.value?"text-slate-400":"text-black",s.item.menu?"":"p-3",s.item.isCurrentUser?"":"border border-transparent hover:bg-gray-100 hover:border hover:rounded-lg"];return s.item.isDesktopNoLabel&&o.push("w-16","justify-center"),o}),t=b(!1),m=o=>{l("menu-click",o,s.item),s.item.menu&&(t.value=!t.value)},i=(o,w)=>{l("menu-click",o,w)},d=b(null),_=o=>{d.value&&!d.value.contains(o.target)&&(t.value=!1)};return I(()=>{s.item.menu&&window.addEventListener("click",_)}),K(()=>{s.item.menu&&window.removeEventListener("click",_)}),(o,w)=>{const N=me,y=E,h=Y;return o.item.isDivider?(v(),S(N,{key:0,"nav-bar":""})):(v(),S(P(p(a)),{key:1,ref_key:"root",ref:d,class:"flex items-center justify-center relative cursor-pointer w-full lg:w-auto",to:o.item.to??null,target:o.item.target??null,onClick:m},{default:k(()=>[n("div",{class:g(["flex justify-center items-center",{"bg-transparent":o.item.menu}])},[n("span",{class:g(["lg:m-2 transition-colors",{hidden:o.item.isDesktopNoLabel&&o.item.icon,"w-34":!o.item.isCurrentUser}])},[n("div",{class:g(["flex justify-center items-center",[o.item.isCurrentUser?"border rounded-full text-sm font-semibold w-10 h-10 lg:mr-2":["gap-1",...p(r)]]])},[f(y,{class:g([o.item.icon,"text-xl text-zinc-600"])},null,8,["class"]),L(" "+z(o.item.label),1)],2)],2)],2),o.item.menu?(v(),x("div",{key:0,class:g(["text-sm bg-white border border-neutral-300 absolute top-full -left-10 lg:-left-20 min-w-full z-20 rounded-lg shadow-lg",{hidden:!p(t)}])},[f(h,{menu:o.item.menu,onMenuClick:i},null,8,["menu"])],2)):R("",!0)]),_:1},8,["to","target"]))}}}),Y=M({__name:"NavBarMenuList",props:{menu:{}},emits:["menu-click"],setup(e,{emit:u}){const s=u,l=(a,r)=>{s("menu-click",a,r)};return(a,r)=>{const t=de;return v(!0),x(Q,null,F(a.menu,(m,i)=>(v(),S(t,{key:i,item:m,onMenuClick:l},null,8,["item"]))),128)}}}),pe={class:"fixed inset-x-0 top-0 h-[68px] z-30 transition-position border-b border-b-color-transparent-dark"},fe={class:"md:min-w-full flex lg:justify-between h-[68px]"},ve=M({__name:"NavBar",props:{menu:{}},emits:["menu-click"],setup(e,{emit:u}){const s=u,l=(t,m)=>{s("menu-click",t,m)},a=b(!1),r=()=>{a.value=window.scrollY>0};return I(()=>{window.addEventListener("scroll",r)}),U(()=>{window.removeEventListener("scroll",r)}),(t,m)=>{const i=Y;return v(),x("nav",pe,[n("div",fe,[D(t.$slots,"default"),f(i,{menu:t.menu,onMenuClick:l},null,8,["menu"])])])}}}),_e={key:0,class:"modal-bg"},xe={class:"flex justify-between items-center border-b border-dashed p-4"},we={key:0,class:"flex justify-end border-t border-dashed p-4"},he=M({__name:"Modal",props:{title:{type:String,default:""},backdropClose:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},size:{type:String,default:"default"}},emits:["close","submit"],setup(e,{emit:u}){const s=e,l=u,a=()=>{l("close")},r=()=>{l("submit")},t=i=>{i.key==="Escape"&&a()},m=A(()=>({default:"max-h-[350px] md:w-[500px]",lg:"max-h-[550px] md:w-[600px]",xl:"max-h-[600px] md:w-[900px]",full:"max-h-[calc(100vh-140px)]"})[s.size]);return I(()=>{document.addEventListener("keydown",t)}),K(()=>{document.removeEventListener("keydown",t)}),(i,d)=>{const _=E;return e.visible?(v(),x("section",_e,[n("div",{class:"absolute w-full h-screen",onClick:d[0]||(d[0]=o=>e.backdropClose&&a())}),n("div",{class:g(["bg-white border z-50 border-gray-200 rounded-default w-auto",[s.size=="full"?"md:min-w-[500px]":""]])},[n("form",{onSubmit:d[2]||(d[2]=H(o=>r(),["prevent"]))},[n("div",xe,[n("h5",null,z(e.title),1),n("div",null,[f(_,{class:"icon-X text-xl text-gray-500 hover:opacity-80",onClick:d[1]||(d[1]=o=>a())})])]),n("div",{class:g(["px-4 py-6 overflow-auto",[p(m)]])},[D(i.$slots,"default",{},void 0,!0)],2),i.$slots.footer?(v(),x("div",we,[D(i.$slots,"footer",{},void 0,!0)])):R("",!0)],32)],2)])):R("",!0)}}}),be=W(he,[["__scopeId","data-v-20099698"]]),V=e=>(te("data-v-8b94201d"),e=e(),se(),e),ge={class:"w-[251.5px] mx-auto"},ke={class:"flex gap-2"},ye={key:0,class:"flex cursor-pointer rounded-3xl text-black px-5 py-4 group hover:bg-color-transparent-base"},Ce=V(()=>n("div",{class:"cover-record group-hover:opacity-0"},null,-1)),Me={class:"flex justify-start items-center truncate text-base text-neutral-900"},$e={key:1},Be=V(()=>n("div",null,"Rename",-1)),Le=V(()=>n("div",null,"Delete",-1)),Ae=M({__name:"AsideMenuItem",props:{item:{type:Object,required:!0,validator:e=>(console.log(e.to),e.to&&!e.to.startsWith("/chat/")&&(e.to=`/chat/${e.to}`),!0)}},emits:["menu-click"],setup(e,{emit:u}){const s=e,l=u,a=h=>{l("menu-click",h,s.item)},r=b("mt-8"),t=()=>{q(()=>{const h=document.querySelector(".show-action");if(h){const c=h.getBoundingClientRect(),$=window.innerHeight;r.value=c.top>$/2?"-mt-56":"mt-0"}})},m=b(!1),i=h=>{const c=document.querySelector(".show-action");c&&!c.contains(h.target)&&(m.value=!1)},d=b(null),_=b(!1),o=()=>{_.value=!0,m.value=!1,q(()=>{var h,c;(c=(h=d.value)==null?void 0:h.inputElement)==null||c.focus()})},w=b(null),N=()=>{w.value&&l("menu-click",new MouseEvent("click"),{room:w.value,action:"delete"}),y.value=!1,w.value=null},y=b(!1);return Z(m,async h=>{h&&t()}),I(()=>{document.addEventListener("click",i),window.addEventListener("resize",t)}),U(()=>{document.removeEventListener("click",i),window.removeEventListener("resize",t)}),(h,c)=>{const $=ae,G=be,j=E,J=T;return v(),x("li",ge,[f(G,{"backdrop-close":!1,visible:p(y),onClose:c[1]||(c[1]=()=>{y.value=!1,w.value=null})},{footer:k(()=>[n("div",ke,[f($,{class:"border border-gray-500",variant:"outline",onClick:c[0]||(c[0]=C=>y.value=!1)},{default:k(()=>[L(" Close ")]),_:1}),f($,{class:"bg-red-500 text-white",onClick:N},{default:k(()=>[L(" Delete Room ")]),_:1})])]),default:k(()=>[L(" Are you sure you want to delete this room: "),n("b",null,z(p(w)),1),L("? ")]),_:1},8,["visible"]),(v(),S(P(e.item.to?p(X):"a"),{to:e.item.to,onClick:a},{default:k(()=>[p(_)?(v(),x("div",$e,[f(J,{modelValue:e.item.label,"onUpdate:modelValue":c[3]||(c[3]=C=>e.item.label=C),onBlur:c[4]||(c[4]=C=>_.value=!1),onKeyup:c[5]||(c[5]=ee(C=>_.value=!1,["enter"])),ref_key:"inputRef",ref:d},null,8,["modelValue"])])):(v(),x("div",ye,[Ce,n("div",Me,z(e.item.label),1),f(j,{class:"flex-none icon-more-horizontal pl-3 text-white group-hover:text-black ml-auto",onClick:c[2]||(c[2]=H(C=>m.value=!p(m),["stop"]))})]))]),_:1},8,["to"])),p(m)?(v(),x("div",{key:0,class:g(`show-action p-2 flex flex-col items-center z-10 bg-white border w-[133px] border-gray-200 right-4 absolute rounded-lg shadow-lg ${p(r)}`),onClick:c[8]||(c[8]=H(()=>{},["stop"]))},[f($,{class:"item",onClick:c[6]||(c[6]=C=>o())},{default:k(()=>[f(j,{class:"icon-pen-write-edit text-gray-400"}),Be]),_:1}),f($,{class:"item text-red-600 pointer-events-auto",onClick:c[7]||(c[7]=C=>{m.value=!1,w.value=e.item.label,y.value=!0})},{default:k(()=>[f(j,{class:"icon-trash"}),Le]),_:1})],2)):R("",!0)])}}}),Se=W(Ae,[["__scopeId","data-v-8b94201d"]]),ze={__name:"AsideMenuList",props:{isDropdownList:Boolean,menu:{type:Array,required:!0},filterMenu:{type:String,default:""}},emits:["menu-click"],setup(e,{emit:u}){const s=e,l=u,a=(t,m)=>{l("menu-click",t,m)},r=A(()=>{if(s.menu.length)return s.menu.slice().reverse().filter(t=>t.label.toLowerCase().includes(s.filterMenu.toLowerCase()))});return(t,m)=>{const i=Se;return v(),x("div",null,[n("ul",null,[(v(!0),x(Q,null,F(p(r),(d,_)=>(v(),S(i,{key:_,item:d,onMenuClick:a},null,8,["item"]))),128))])])}}},Ee={class:"flex flex-col overflow-hidden bg-white"},Ie={class:"fixed z-20 top-[68px] w-[295px] bg-white"},Ne={class:"flex justify-center items-center pt-7 px-7"},Re={class:"overflow-y-auto overflow-x-hidden px-2 pt-[90px] pb-[150px]"},De={class:"flex justify-between items-center py-7 px-7"},je={class:"text-neutral-900"},He={__name:"AsideMenuLayer",props:{menu:{type:Array,required:!0},isAsideActive:{type:Boolean,required:!0}},emits:["menu-click"],setup(e,{emit:u}){const s=b(""),l=u,a=A(()=>({label:"New Chat",icon:"icon-chat",isLogout:!0})),r=(m,i)=>{l("menu-click",m,i)},t=()=>{ne("/chat")};return(m,i)=>{const d=T,_=ze,o=E;return v(),x("aside",{id:"aside",class:g(["h-screen overflow-auto fixed w-[295px] bg-white transition-position z-10",[e.isAsideActive?"-left-[295px]":"left-0"]])},[n("div",Ee,[n("div",Ie,[n("div",Ne,[f(d,{modelValue:p(s),"onUpdate:modelValue":i[0]||(i[0]=w=>oe(s)?s.value=w:null),"bg-color":"bg-gray-100",type:"text",icon:"icon-search",placeholder:"Search"},null,8,["modelValue"])])]),n("div",Re,[f(_,{menu:e.menu,"filter-menu":p(s),onMenuClick:r},null,8,["menu","filter-menu"])]),n("div",{class:"fixed bottom-0 w-[295px] border-t bg-white cursor-pointer text-color-primary hover:text-color-secondary",onClick:i[1]||(i[1]=w=>t())},[n("div",De,[n("div",je,z(p(a).label),1),f(o,{class:g([p(a).icon,"text-xl"])},null,8,["class"])])])])],2)}}},Ue=M({__name:"AsideMenu",props:{menu:{type:Array,required:!0},isAsideActive:Boolean},emits:["menu-click"],setup(e,{emit:u}){const s=u,l=(a,r)=>{s("menu-click",a,r)};return(a,r)=>{const t=He;return v(),x("div",null,[f(t,{menu:e.menu,"is-aside-active":e.isAsideActive,onMenuClick:l},null,8,["menu","is-aside-active"])])}}}),Ve=()=>{const e=O("messages",b([])),u=O("messagesHistory",b([])),s=t=>{e.value.push({userMessage:t.userMessage,assistantMessage:`這是機器人回覆：「${t.userMessage}」`})},l=t=>{u.value=[{userMessage:"這是舊訊息 1",assistantMessage:"這是機器人的回覆 1"},{userMessage:"這是舊訊息 2",assistantMessage:"這是機器人的回覆 2"}]},a=t=>{e.value=[]},r=t=>{console.log(`房間 ${t} 被刪除`)};return B("messages",e),B("messagesHistory",u),B("leaveRoom",a),B("sendMessage",s),B("getHistory",l),B("deleteRoom",r),{messages:e,messagesHistory:u,leaveRoom:a,sendMessage:s,getHistory:l,deleteRoom:r}},qe=ie("/img/logo_min.svg"),Oe=[{isCurrentUser:!0,icon:"icon-account",menu:[{label:"Log Out",icon:"icon-logout",isLogout:!0}]}],Te={class:"pt-[68px] h-auto w-screen md:w-auto transition-position"},Ke={class:"flex w-[295px]"},Pe=n("div",{class:"flex border-r border-r-color-transparent-dark py-3 px-5 w-[165px]"},[n("img",{src:qe,class:"w-full"})],-1),Je=M({__name:"authenticated",setup(e){const u=ce();ue({title:"Chat Helper"}),Ve();const s=le(),l=b(!1);b([]);const a=re(),r=()=>{l.value=window.matchMedia("(max-width: 768px)").matches},t=async()=>{},m=async(i,d)=>{d.isLogout&&await s.logout(),d.action==="delete"&&(u.roomList=u.roomList.filter(_=>_.label!==d.room)),d.action==="rename"&&console.log("rename")};return a.beforeEach(()=>{r(),t()}),I(()=>{const i=window.matchMedia("(max-width: 768px)");r(),i.addEventListener("change",r),t()}),U(()=>{window.matchMedia("(max-width: 768px)").removeEventListener("change",r)}),(i,d)=>{const _=E,o=ve,w=Ue;return v(),x("div",Te,[f(o,{menu:p(Oe),onMenuClick:m},{default:k(()=>[n("div",Ke,[n("div",{class:"flex justify-center items-center border-r border-r-color-transparent-dark py-3 px-5 w-[130px]",onClick:d[0]||(d[0]=N=>l.value=!p(l))},[f(_,{class:"icon-sidebar text-2xl"})]),Pe])]),_:1},8,["menu"]),f(w,{"is-aside-active":p(l),menu:p(u).roomList,onMenuClick:m},null,8,["is-aside-active","menu"]),n("div",{class:g(["md:fixed transition-all z-0",p(l)?"inset-x-0 w-screen":"md:left-[295px] md:w-[calc(100vw-295px)]"])},[D(i.$slots,"default")],2)])}}});export{Je as default};
